<details class="activity_log">
  <summary>
    Activity log
  </summary>
  <ul>
    <li>
      Created <span class="automatic-suggestion"
                      {# TODELETE: style once color is applied through class #}
                      style="font-weight:bold;color:royalblue"
              >automatic suggestion</span>
      {% if activity_log.created_at is None %}
        before activity logging was enabled.
      {% else %}
        {{ activity_log.created_at }}
      {% endif %}
    </li>
    {% for timestamp, log_entries in activity_log.updates.items %}
    {% for log_entry in log_entries %}
      <li>
        @<strong>{{ log_entry.user }}</strong>
        {% if "derivations." in log_entry.action %}
        {# Package update entries #}
          {% for packagename, derivations in log_entry.target.items %}
            {# Leave derivation list ready when displaying more details #}
            {% if ".add" in log_entry.action %}
              added
            {% else %}
              removed
            {% endif %}
            package <strong>{{ packagename }}</strong>
          {% endfor %}
        {% else %}
          {# Status update entries #}
          {% if "accepted" in log_entry.target  %}
            <span class="suggestion-status-selected"
                  {# TODELETE: style once color is applied through class #}
                  style="font-weight:bold;color:limegreen"
            >selected</span>
          {% elif "rejected" in log_entry.target %}
            <span class="suggestion-status-dismissed"
                  {# TODELETE: style once color is applied through class #}
                  style="font-weight:bold;color:darkgreen"
            >dismissed</span>
          {% else %}
            {{ log_entry.action }}
          {% endif %}
        {% endif %}
        {{ timestamp }}
      </li>
    {% endfor %}
    {% endfor %}
  </ul>
</details>
